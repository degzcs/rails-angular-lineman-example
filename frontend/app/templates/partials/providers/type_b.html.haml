%div{:layout => "column", :style => "padding-left:20px; padding-right:20px;"}
  %md-tabs{"md-selected" => "formTabControl.selectedIndex"}
    %md-tab#tab1{"aria-controls" => "tab1-content", "ng-click" => "formTabControl.selectedIndex = 0"}
      {{ formTabControl.firstLabel }}
    %md-tab#tab2{"aria-controls" => "tab2-content", "ng-disabled" => "!newProvider.has_company", "ng-click" => "formTabControl.selectedIndex = 1"}
      {{ formTabControl.secondLabel }}
    %md-tab#tab3{"aria-controls" => "tab3-content", "ng-click" => "formTabControl.selectedIndex = 2"}
      {{ formTabControl.thirdLabel }}
      
  %form{:name => "providerCreateForm", "novalidate" => "novalidate"}
    %ng-switch.tabpanel-container{:on => "formTabControl.selectedIndex"}
      #tab1-content{"aria-labelledby" => "tab1", "md-swipe-left" => "next()", "md-swipe-right" => "previous()", "ng-switch-when" => "0", :role => "tabpanel"}
        %md-content.md-padding{:layout => "row", "layout-sm" => "column", "md-theme" => "default"}
          %fieldset.standard.tr-fieldset.photo-fieldset
            %legend
              %h4 Tome una foto al proveedor
            %md-input-container.row{"layout-align" => "center center"}
              .photo{:style => "max-width:150px;"}
                %a.image-container{'ng-href' => "#camera",'ng-click' => "scanner(1)"}
                  %img.face.cam{'alt'=>'Foto Proveedor', 'ng-src' => "{{newProvider.photo_file || 'img/default-user.png'}}","ng-model" => "newProvider.photo_file",  "check-image" => ''}
                  %md-tooltip{'md-direction'=> 'bottom'}
                    Tomar Foto
          %fieldset.standard.fieldset-information{:flex => ""}
            %legend
              %h4 Información
            %md-content.md-padding{:layout => "", "layout-sm" => "column", :style => "font-size:1.2em"}
              %md-input-container{:flex => ""}
                %label Nombre
                %input{:name => "first_name", "ng-model" => "newProvider.first_name", :required => ""}
                %div{"ng-messages" => "providerCreateForm.first_name.$error"}
                  %div{"ng-message" => "required"} Este campo es requerido.
              %md-input-container{:flex => ""}
                %label Apellido
                %input{:name => "last_name", "ng-model" => "newProvider.last_name", :required => ""}
                %div{"ng-messages" => "providerCreateForm.last_name.$error"}
                  %div{"ng-message" => "required"} Este campo es requerido.
            %md-content.md-padding{:layout => "", "layout-sm" => "column"}
              %md-input-container{:flex => ""}
                %label {{rucomIDField.label}}
                %input{:readonly => "true", "ng-model" => "newProvider.rucom[rucomIDField.field]"}
                %md-tooltip{"md-direction" => "botton", "md-visible" => "true"} 
                  %span.ion-android-checkmark-circle &nbsp;válido
              %md-input-container{:flex => ""}
                %label Número de Identificación
                %input{:name => "document_number", "ng-model" => "newProvider.document_number", :required => ""}
                %div{"ng-messages" => "providerCreateForm.document_number.$error"}
                  %div{"ng-message" => "required"} Este campo es requerido.
              %md-input-container{:flex => ""}
                %label Tipo de Proveedor
                %input{"ng-model" => "newProvider.rucom.provider_type", "ng-readonly" => "true", :placeholder => "Provider type"}
            %md-content.md-padding{:layout => "", "layout-sm" => "column"}
              %md-input-container{:flex => ""}
                %label Teléfono
                %input{:name => "phone_number", "ng-model" => "newProvider.phone_number", :placeholder => "(555) 555 5555", :required => ""}
                %div{"ng-messages" => "providerCreateForm.phone_number.$error"}
                  %div{"ng-message" => "required"} Este campo es requerido.
              %md-input-container{:flex => ""}
                %label Email
                %input{:name => "email", "ng-model" => "newProvider.email", :type => "email", :required => ""}
                %div{"ng-messages" => "providerCreateForm.email.$error"}
                  %div{"ng-message" => "required"} Este campo es requerido.
                  %div{"ng-message" => "email"} Ingrese un e-mail válido.
              %md-input-container{:flex => ""}
                %label Dirección
                %input{:name => "address", "ng-model" => "newProvider.address", :placeholder => "CLL/CR 1 22 - 33", :required => ""}
                %div{"ng-messages" => "providerCreateForm.address.$error"}
                  %div{"ng-message" => "required"} Este campo es requerido.

            %br
            %div{:layout => "row", "layout-align" => "space-between start", "layout-sm" => "column", :style => "padding: 16px;"}
              %md-autocomplete{:required => "true", :flex => "30", "md-item-text" => "state.name", "md-items" => "state in stateSearch(searchState)", "md-no-cache" => "true", "md-search-text" => "searchState", "md-search-text-change" => "searchTextStateChange(searchState)", "md-selected-item" => "selectedState", "md-selected-item-change" => "selectedStateChange(state)", :placeholder => "Departamento"}
                %span{"md-highlight-text" => "searchState"} {{state.name}}
              %md-autocomplete{:required => "true", :flex => "30", "md-item-text" => "city.name", "md-items" => "city in citySearch(searchCity)", "md-no-cache" => "true", "md-search-text" => "searchCity", "md-search-text-change" => "searchTextCityChange(searchCity)", "md-selected-item" => "selectedCity", "md-selected-item-change" => "selectedCityChange(city)", "ng-disabled" => "cityDisabled", :placeholder => "Municipio"}
                %span{"md-highlight-text" => "searchCity"} {{city.name}}
              %md-autocomplete{:required => "true", :flex => "30", "md-item-text" => "populationCenter.name", "md-items" => "populationCenter in populationCenterSearch(searchPopulationCenter)", "md-no-cache" => "true", "md-search-text" => "searchPopulationCenter", "md-search-text-change" => "searchTextPopulationCenterChange(searchPopulationCenter)", "md-selected-item" => "selectedPopulationCenter", "md-selected-item-change" => "selectedPopulationCenterChange(populationCenter)", "ng-disabled" => "populationCenterDisabled", :placeholder => "Centro Poblado"}
                %span{"md-highlight-text" => "searchPopulationCenter"} {{populationCenter.name}}
            %div{:layout => "row", "layout-align" => "space-between center", "layout-margin" => "", "layout-sm" => "column"}
              %div{:layout => "row", :flex => "50", "layout-align" => "space-between center"}
                %md-input-container{:style => "margin-top:26px"}
                  %md-checkbox{"aria-label" => "Disabled", "ng-model" => "newProvider.has_company", "ng-change" => "check()"} ¿Es una compañía?
              / %div{:layout => "row", :flex => "40", "layout-align" => "space-between center"}
              /   %md-button{:class => "md-raised", "ng-click" => "back()"} Cancelar
              /   %md-button{"ng-disabled" => "!providerCreateForm.$valid || !saveBtnEnabled", :class => "md-raised md-accent", "ng-click" => "createProvider($event)"} Guardar
              /   %md-button{:class => "md-raised md-primary", "ng-click" => "next()"} Siguiente
      #tab2-content{"ng-if" => "newProvider.has_company", "aria-labelledby" => "tab2", "md-swipe-left" => "next()", "md-swipe-right" => "previous()", "ng-switch-when" => "1", :role => "tabpanel"} 
        %fieldset.standard.fieldset-information
          %legend
            %h4 Información            
          %md-content.md-padding{:layout => "row", "layout-sm" => "column", "md-theme" => "default"}
            %md-input-container{:flex => ""}
              %label Nombre del Compañía
              %input{:name => "company_info_name", "ng-model" => "newProvider.company_info.name", :required => ""}
              %div{"ng-messages" => "providerCreateForm.company_info_name.$error"}
                %div{"ng-message" => "required"} Este campo es requerido. 
            %md-input-container{:flex => ""}
              %label NIT
              %input{:name => "nit_number", "ng-model" => "newProvider.company_info.nit_number", :required => ""}
              %div{"ng-messages" => "providerCreateForm.nit_number.$error"}
                %div{"ng-message" => "required"} Este campo es requerido. 
          %md-content.md-padding{:layout => "", "layout-sm" => "column"}
            %md-input-container{:flex => ""}
              %label Representante Legal
              %input{:name => "legal_representative", "ng-model" => "newProvider.company_info.legal_representative", :required => ""}
              %div{"ng-messages" => "providerCreateForm.legal_representative.$error"}
                %div{"ng-message" => "required"} Este campo es requerido.
            %md-select.layout-padding{:flex => "15", :style => "margin-top: 20px;", "ng-model" => "newProvider.company_info.id_type_legal_rep", :placeholder => "Legal Rep. ID Type"}
              %md-option{"ng-repeat" => "type in idTypeLegalRep", "ng-value" => "type.name"} {{ type.name }}
            %md-input-container{:flex => ""}
              %label Identificación del Representante Legal
              %input{:name => "id_number_legal_rep", "ng-model" => "newProvider.company_info.id_number_legal_rep", :required => ""}
              %div{"ng-messages" => "providerCreateForm.id_number_legal_rep.$error"}
                %div{"ng-message" => "required"} Este campo es requerido.
          %md-content.md-padding{:layout => "", "layout-sm" => "column"}
            %md-input-container{:flex => ""}
              %label Teléfono
              %input{:required => "true", :name => "company_phone_number", "ng-model" => "newProvider.company_info.phone_number", :placeholder => "(555) 555 5555"}
              %div{"ng-messages" => "providerCreateForm.company_phone_number.$error"}
                %div{"ng-message" => "required"} Este campo es requerido.
            %md-input-container{:flex => ""}
              %label E-mail
              %input{:required => "true", :type => "email", :name => "company_email", "ng-model" => "newProvider.company_info.email", :placeholder => "mail@example.com"}
              %div{"ng-messages" => "providerCreateForm.company_email.$error"}
                %div{"ng-message" => "required"} Este campo es requerido.
                %div{"ng-message" => "email"} Ingrese un e-mail válido
          %md-content.md-padding{:layout => "", "layout-sm" => "column"}

        / %div{:layout => "row", "layout-align" => "space-between center", "layout-margin" => "", "layout-sm" => "column"}
        /   %div{:layout => "row", :flex => "", "layout-align" => "start center"}
        /     %md-button{"ng-disabled" => "!formTabControl.secondUnlocked", :class => "md-raised md-primary", "ng-click" => "previous()"} Prev
        /   %div{:layout => "row", :flex => "25", "layout-align" => "space-between center"}
        /     %md-button{:class => "md-raised", "ng-click" => "back()"} Cancelar
        /     %md-button{"ng-disabled" => "!providerCreateForm.$valid || !saveBtnEnabled", :class => "md-raised md-accent", "ng-click" => "createProvider($event)"} Guardar
        /     %md-button{:class => "md-raised md-primary", "ng-click" => "next()"} Siguiente
      #tab3-content{"aria-labelledby" => "tab3", "md-swipe-left" => "next()", "md-swipe-right" => "previous()", "ng-switch-when" => "2", :role => "tabpanel"}
        %div.uploader-certificate-tab{:layout => "row", "layout-align" => "space-between center", "layout-margin" => "", "layout-sm" => "column"}
                       
          %div{flex: '40'}
            %h4 Subir documento de identificación
            %md-select.uploader-selector{"ng-model" => "identification_number_upload_type", :placeholder => "Cargar Documento de Identificación"}
              %md-option{:value => "by_upload"} Desde el PC
              %md-option{:value => "by_scan"} Por Escaner
              %md-option{:value => "by_photo"} por Camara
          %div{flex: ''}
            .upload-oc{:flex => ''}
              .button-action.md-padding{"ng-switch" => '', :on => 'identification_number_upload_type'}
                .by_upload{"ng-switch-when" =>'by_upload'}
                  %md-button.md-fab.md-accent.md-default-theme{'ng-file-select' => '', 'ng-model' => 'newProvider.identification_number_file'}
                    %md-icon{"md-svg-icon"=>"file:file_upload"}
                    %md-tooltip{"md-visible" => "demo.showTooltip"}
                      Subir Foto
                      %span.ion-android-checkmark-circle

                %md-input-container
                  %label Nombre del archivo
                  %input{"ng-model" => "newProvider.identification_number_file[0].name", :readonly => 'true',:required => "", :name => 'identification_number'}
                  %div{"ng-messages" => "providerCreateForm.identification_number.$error"}
                    %div{"ng-message" => "required"} * Debe seleccionar el documento de identificación


                .by_scan{"ng-switch-when" =>'by_scan'}
                  %md-button.md-fab.md-accent.md-default-theme{'ng-href' => "#scanner1",'ng-click' => "scanner(2)"}
                    %md-icon{"md-svg-icon"=>"maps:local_print_shop"}
                    %md-tooltip{"md-visible" => "demo.showTooltip"}
                      Escanear Documento
                      %span.ion-android-checkmark-circle


                .by_photo{"ng-switch-when" =>'by_photo'}
                  .md-tile-left.cam
                    %md-button.md-fab.md-accent.md-default-theme.cam{"aria-label" => "Número de Identificación", "md-ripple-size" => "partial","ng-href" => "#scanner",'ng-click' => "scanner(2)"}
                      %md-icon{"md-svg-icon" => "image:camera_alt"}
                      %md-tooltip{"md-visible" => "demo.showTooltip"}
                        Tomar Foto
                        %span.ion-android-checkmark-circle  


        %div.uploader-certificate-tab{:layout => "row", "layout-align" => "space-between center", "layout-margin" => "", "layout-sm" => "column"}
          %div{flex: '40'}
            %h4 Registro Minero
            %md-select.uploader-selector{"ng-model" => "mining_register_upload_type", :placeholder => "Cargar Registro Minero"}
              %md-option{:value => "by_upload"} Desde el PC
              %md-option{:value => "by_scan"} Por Escaner
              %md-option{:value => "by_photo"} por Camara
          %div{flex: ''}
            .upload-oc{:flex => ''}
              .button-action.md-padding{"ng-switch" => '', :on => 'mining_register_upload_type'}
                .by_upload{"ng-switch-when" =>'by_upload'}
                  %md-button.md-fab.md-accent.md-default-theme{'ng-file-select' => '', 'ng-model' => 'newProvider.mining_register_file'}
                    %md-icon{"md-svg-icon"=>"file:file_upload"}
                    %md-tooltip{"md-visible" => "demo.showTooltip"}
                      Subir Foto
                      %span.ion-android-checkmark-circle

                %md-input-container
                  %label Nombre del archivo
                  %input{"ng-model" => "newProvider.mining_register_file[0].name", :readonly => 'true',:required => "", :name => 'mining_register_file'}
                  %div{"ng-messages" => "providerCreateForm.mining_register_file.$error"}
                    %div{"ng-message" => "required"} * Debe seleccionar el registro minero 

                .by_scan{"ng-switch-when" =>'by_scan'}
                  %md-button.md-fab.md-accent.md-default-theme{'ng-href' => "#scanner1",'ng-click' => "scanner(3)"}
                    %md-icon{"md-svg-icon"=>"maps:local_print_shop"}
                    %md-tooltip{"md-visible" => "demo.showTooltip"}
                      Escanear Documento
                      %span.ion-android-checkmark-circle


                .by_photo{"ng-switch-when" =>'by_photo'}
                  .md-tile-left.cam
                    %md-button.md-fab.md-accent.md-default-theme.cam{"aria-label" => "Registro Minero", "md-ripple-size" => "partial", "ng-href" => "#scanner",'ng-click' => "scanner(3)"}
                      %md-icon{"md-svg-icon" => "image:camera_alt"}
                      %md-tooltip{"md-visible" => "demo.showTooltip"}
                        Tomar Foto
                        %span.ion-android-checkmark-circle  

        %div.uploader-certificate-tab{:layout => "row", "layout-align" => "space-between center", "layout-margin" => "", "layout-sm" => "column"}
          %div{flex: '40'}
            %h4 Copia del RUT
            %md-select.uploader-selector{"ng-model" => "rut_upload_type", :placeholder => "Cargar Copia del RUT"}
              %md-option{:value => "by_upload"} Desde el PC
              %md-option{:value => "by_scan"} Por Escaner
              %md-option{:value => "by_photo"} por Camara
          %div{flex: ''}
            .upload-oc{:flex => ''}
              .button-action.md-padding{"ng-switch" => '', :on => 'rut_upload_type'}
                .by_upload{"ng-switch-when" =>'by_upload'}
                  %md-button.md-fab.md-accent.md-default-theme{'ng-file-select' => '', 'ng-model' => 'newProvider.rut_file'}
                    %md-icon{"md-svg-icon"=>"file:file_upload"}
                    %md-tooltip{"md-visible" => "demo.showTooltip"}
                      Subir Foto
                      %span.ion-android-checkmark-circle

                %md-input-container
                  %label Nombre del archivo
                  %input{"ng-model" => "newProvider.rut_file[0].name", :readonly => 'true',:required => "", :name => 'rut_file'}
                  %div{"ng-messages" => "providerCreateForm.rut_file.$error"}
                    %div{"ng-message" => "required"} * Debe seleccionar el rut 


                .by_scan{"ng-switch-when" =>'by_scan'}
                  %md-button.md-fab.md-accent.md-default-theme{'ng-href' => "#scanner1",'ng-click' => "scanner(4)"}
                    %md-icon{"md-svg-icon"=>"maps:local_print_shop"}
                    %md-tooltip{"md-visible" => "demo.showTooltip"}
                      Escanear Documento
                      %span.ion-android-checkmark-circle


                .by_photo{"ng-switch-when" =>'by_photo'}
                  .md-tile-left.cam
                    %md-button.md-fab.md-accent.md-default-theme.cam{"aria-label" => "RUT", "md-ripple-size" => "partial","ng-href" => "#scanner",'ng-click' => "scanner(4)"}
                      %md-icon{"md-svg-icon" => "image:camera_alt"}
                      %md-tooltip{"md-visible" => "demo.showTooltip"}
                        Tomar Foto
                        %span.ion-android-checkmark-circle

        %div.uploader-certificate-tab{"ng-if" => "newProvider.rucom.provider_type === 'Comercializadores'", :layout => "row", "layout-align" => "space-between center", "layout-margin" => "", "layout-sm" => "column"}
          %div{flex: '40'}
            %h4 Cámara de Comercio
            %md-select.uploader-selector{"ng-model" => "chamber_commerce_upload_type", :placeholder => "Cargar Cámara de Comercio"}
              %md-option{:value => "by_upload"} Desde el PC
              %md-option{:value => "by_scan"} Por Escaner
              %md-option{:value => "by_photo"} por Camara
          %div{flex: ''}
            .upload-oc{:flex => ''}
              .button-action.md-padding{"ng-switch" => '', :on => 'chamber_commerce_upload_type'}
                .by_upload{"ng-switch-when" =>'by_upload'}
                  %md-button.md-fab.md-accent.md-default-theme{'ng-file-select' => '', 'ng-model' => 'newProvider.chamber_commerce_file'}
                    %md-icon{"md-svg-icon"=>"file:file_upload"}
                    %md-tooltip{"md-visible" => "demo.showTooltip"}
                      Subir Foto
                      %span.ion-android-checkmark-circle

                %md-input-container
                  %label Nombre del archivo
                  %input{"ng-model" => "newProvider.chamber_commerce_file[0].name", :readonly => 'true',:required => "", :name => 'chamber_commerce_file'}
                  %div{"ng-messages" => "providerCreateForm.chamber_commerce_file.$error"}
                    %div{"ng-message" => "required"} * Debe seleccionar el certificado de cámara de comercio 


                .by_scan{"ng-switch-when" =>'by_scan'}
                  %md-button.md-fab.md-accent.md-default-theme{'ng-href' => "#scanner1",'ng-click' => "scanner(5)"}
                    %md-icon{"md-svg-icon"=>"maps:local_print_shop"}
                    %md-tooltip{"md-visible" => "demo.showTooltip"}
                      Escanear Documento
                      %span.ion-android-checkmark-circle


                .by_photo{"ng-switch-when" =>'by_photo'}
                  .md-tile-left.cam
                    %md-button.md-fab.md-accent.md-default-theme.cam{"aria-label" => "Cámara de Comercio", "md-ripple-size" => "partial","ng-href" => "#scanner",'ng-click' => "scanner(5)"}
                      %md-icon{"md-svg-icon" => "image:camera_alt"}
                      %md-tooltip{"md-visible" => "demo.showTooltip"}
                        Tomar Foto
                        %span.ion-android-checkmark-circle

      %div.info-buttons{layout: 'row', "layout-align"=> "end center"}
        %md-button.btn-cancel{"ng-if" => "formTabControl.selectedIndex > 0", "ng-disabled" => "!formTabControl.secondUnlocked", :class => "md-raised md-primary", "ng-click" => "previous()"} Anterior
        %md-button.btn-cancel{:class => "md-raised", "ng-click" => "back()"} Cancelar
        %md-button.btn-save{"ng-disabled" => "(!providerCreateForm.$valid || !saveBtnEnabled) && formTabControl.selectedIndex !== 1", :class => "md-raised md-accent", "ng-click" => "createProvider($event)"} Guardar
        %md-button.btn-save{"ng-if" => "formTabControl.selectedIndex < 1", :class => "md-raised md-primary", "ng-click" => "next()"} Siguiente


