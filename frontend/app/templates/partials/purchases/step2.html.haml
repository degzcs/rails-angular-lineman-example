//---------------------- Purchase TAB ---------------------------------------
%form{:name => "purchaseForm"}
  %section{"class"=>"autocomplete"}
    .seller
      .row{:layout => "", "layout-sm" => "column"}
        .select-law{'flex' => ''}
          .md-subtitle Ley
          %md-input-container

            %input{ "type" => "number", "string-to-number"=>"", min: => "1" , "max"=>"999" ,'ng-model' => 'goldBatch.model.grade', :required=>"", :name => 'degre', "placeholder" => "Digite el numero de ley"}
            %div{"ng-messages" => "purchaseForm.degre.$error"}
              /%div{"ng-message" => "required"} * Este campo es requerido.
        .fine-gram-unit-price{'flex' => ''}
          .md-subtitle Valor gramo fino
          %md-input-container

            %input{ "type" => "number", "string-to-number"=>"",'ng-model' => 'purchase.model.fine_gram_unit_price', :required=>"", :name => 'fine_gram', :min => "1", "placeholder" => "Precio de gramo fino por unidad"}
            %div{"ng-messages" => "purchaseForm.fine_gram.$error"}
              /%div{"ng-message" => "required"} * Este campo es requerido.
        .price-to-buy{ 'flex' => ''}
          .md-subtitle Merma (%)
          %md-input-container

            %input{ "type" => "number", "string-to-number"=>"",'min' => "0", "max"=>"5",'ng-model' => 'purchase.model.decrease', :required=>"", :name => 'decrease', "placeholder" => "Porcentaje de la merma"}
            %div{"ng-messages" => "purchaseForm.decrease.$error"}



      %div{:layout => "", "layout-sm" => "column", "layout-align" => "center", "layout-margin"}

        .price-to-buy{ 'flex' => ''}
          .md-subtitle Tipo Mineral
          %md-select{"ng-model" => "goldBatch.model.mineral_type", :required=>""}
            %md-option{:selected => "selected", :value => "Oro"} Oro
            %md-option{:value => "Plata"} Plata
            %md-option{:value => "Platino"} Platino


        .price-to-buy{ 'flex' => ''}
          .md-subtitle
            Valor gramo fino de compra
          %div.input-containers-fine-gram-to-buy
            $ {{purchase.model.fine_gram_unit_price_to_buy | number:2}} COP
          /%md-input-container{"ng-hide"=> "true"}
          /  %label
          /  %input.input-num-value{"type" => "number", "string-to-number"=>"",'ng-model' => 'purchase.model.fine_gram_unit_price_to_buy', :required=>"", :name => 'fine_gram_to_buy', :min => "1", "readonly" => "", "placeholder"=>"Precio de gramo fino por unidad"}

      .row{:layout => "", "layout-sm" => "column"}
        .convertion-section{'flex' => ''}
          .md-subtitle Medidas
          %table.md-table
            %thead
              %tr.md-table-headers-row
                %th.md-table-header
                  Medida En Bruto
                %th.md-table-header
                  Precio Unitario
                %th.md-table-header
                  Gramos Brutos
                %th.md-table-header
                  Gramos Finos
                %th.md-table-header
                  Precio Total
            %tbody
              %tr.medidas
                %td.md-table-td-more
                  %md-input-container
                    %input{"ng-model" => "goldBatch.model.grams", "type" => "number", "string-to-number"=>"", "min" => "0", "placeholder" => "Gramo(s)"}
                %td.md-table-td-more
                  {{ gramsUnitPrice | number:2 }}
                %td.md-table-td-more
                  {{ grams | number:2 }}
                %td.md-table-td-more
                  {{ gramsFineGrams | number:2 }}
                %td.md-table-td-more
                  {{ subtotalGrams | number:2}}
              %tr.medidas
                %td.md-table-td-more{colspan: 1}
                  %md-input-container
                    %input{"ng-model" => "goldBatch.model.castellanos", "type" => "number", "string-to-number"=>"", "min" => "0", "placeholder" => "Castellano(s)"}
                %td.md-table-td-more
                  {{ castellanosUnitPrice | number:2 }}
                %td.md-table-td-more
                  {{ castellanosToGrams | number:2 }}
                %td.md-table-td-more
                  {{ castellanosFineGrams | number:2 }}
                %td.md-table-td-more
                  {{ subtotalCastellano | number:2}}
              %tr.medidas
                %td.md-table-td-more{colspan: 1}
                  %md-input-container
                    %input{"ng-model" => "goldBatch.model.tomines", "type" => "number", "string-to-number"=>"", "min" => "0", "placeholder" => "Tomine(s)"}
                %td.md-table-td-more
                  {{ tominesUnitPrice | number:2 }}
                %td.md-table-td-more
                  {{ tominesToGrams | number:2 }}
                %td.md-table-td-more
                  {{ tominesFineGrams | number:2 }}
                %td.md-table-td-more
                  {{ subtotalTomines | number:2}}
              %tr.medidas
                %td.md-table-td-more{colspan: 1}
                  %md-input-container
                    %input{"ng-model" => "goldBatch.model.reales", "type" => "number", "string-to-number"=>"", "min" => "0", "placeholder" => "Real(es)"}
                %td.md-table-td-more
                  {{ realesUnitPrice | number:2 }}
                %td.md-table-td-more
                  {{ realesToGrams | number:2 }}
                %td.md-table-td-more
                  {{ realesFineGrams | number:2 }}
                %td.md-table-td-more
                  {{ subtotalReales | number:2}}
              %tr.medidas
                %td.md-table-td-more{colspan: 1}
                  %md-input-container
                    %input{"ng-model" => "goldBatch.model.granos", "type" => "number", "string-to-number"=>"", "min" => "0", "placeholder" => "Grano(s)"}
                %td.md-table-td-more
                  {{ granosUnitPrice | number:2}}
                %td.md-table-td-more
                  {{ granosToGrams | number:2}}
                %td.md-table-td-more
                  {{ granosFineGrams | number:2}}
                %td.md-table-td-more
                  {{ subtotalGranos | number:2}}
              %tr
                %td.md-table-td-more{colspan: 2}
                  %h3 TOTAL:
                %td.md-table-td-more
                  %h2
                    {{goldBatch.model.total_grams| number:2}}
                %td.md-table-td-more{"layout-align"=>"end end"}
                  %h2
                    {{goldBatch.model.total_fine_grams| number:2}}
                %td.md-table-td-more
                  %h2
                    ${{ purchase.model.price | number:2}}

  .wizard-buttons{layout: "row", "class"=>"md-padding autocomplete",  "layout-align"=>"center"}
    %md-button.btn-back-black{  "ui-sref"=>"new_purchase.step1", "ng-click" => "removeWatchers()"}
      %md-icon{ "md-svg-icon"=>"/img/icons/purchase/back-flecha-yellow.svg" }
      Volver
    %md-button.btn-next.md-raised.md-primary{ "ng-disabled" => 'purchaseForm.$invalid', "ui-sref"=>"new_purchase.step3", "ng-click" => "removeWatchers(); saveState()"} Continuar
      %md-icon{"md-svg-icon"=>"/img/icons/landing/flecha-negra.svg"}


